jobs:
- job: StyleChecks
  displayName: Style Checks
  pool:
    vmImage: 'ubuntu-16.04'
  steps:
  - bash: |
      wget -O - https://apt.llvm.org/llvm-snapshot.gpg.key | sudo apt-key add -
      sudo apt-add-repository "deb http://apt.llvm.org/xenial/ llvm-toolchain-xenial-6.0 main"
      sudo apt-get update
      sudo apt-get install -y clang-format-6.0
      clang-format-6.0 --version
      curl -Ls "https://llvm.org/svn/llvm-project/cfe/trunk/tools/clang-format/git-clang-format" -o $AGENT_TOOLSDIRECTORY/git-clang-format
    displayName: Install clang-format-6.0
  - bash: |
      PATH=$AGENT_TOOLSDIRECTORY:$PATH git clang-format $BUILD_SOURCEVERSION
    displayName: Check format on changed files
